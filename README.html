<!DOCTYPE html>
<html>
  <head>
    <title>README</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

    <script type="text/javascript" charset="utf-8">
      relpath = '';
      if (relpath != '') relpath += '/';
    </script>

    <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
  </head>

  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>

    <div id="content">
      <div class="breadcrumbs">bson v0.1.1 &rarr; <a href="readme.html">README</a></div>
      <h1>elixir-bson</h1>

<p>BSON implementation for Elixir Language</p>

<p>elixir-bson on GitHub <a href="https://github.com/checkiz/elixir-bson">source repo</a> - 
<a href="https://checkiz.github.io/elixir-bson">documentation</a></p>

<p>BSON is a binary format in which zero or more key/value pairs are stored as a single entity, called a document. It is a data type with a standard binary representation defined at <a href="http://www.bsonspec.org">http://www.bsonspec.org</a>.</p>

<p>This implements version 1.0 of that spec.</p>

<p>This project is used by <a href="https://github.com/checkiz/elixir-mongo">elixir-mongo</a>, a <a href="http://www.mongodb.org">MongoDB</a> driver in Elixir.</p>

<p>This implementation maps the Bson grammar with Elixir terms in the following way:</p>

<ul>
<li>document: Map</li>
<li>int32 and int64: Integer</li>
<li>double: Float</li>
<li>string: String</li>
<li>Array: List (non-keyword)</li>
<li>binary: Bson.Bin (record)</li>
<li>ObjectId: Bson.ObjectId (record)</li>
<li>Boolean: true or false (Atom)</li>
<li>UTC datetime: triple Atom</li>
<li>Null value: nil (Atom)</li>
<li>Regular expression: Bson.Regex (record)</li>
<li>JavaScript: Bson.JS (record)</li>
<li>Timestamp: Bson.Timestamp (record)</li>
<li>Min and Max key: <code>MIN_KEY</code> or <code>MAX_KEY</code> (Atom)</li>
</ul>

<p>This is how to encode a sample Elixir Map into a Bson Document:</p>

<pre><code class="elixir">bson = Bson.encode %{a: 1, b: &quot;2&quot;, c: [1,2,3], d: %{d1: 10, d2: 11} }
</code></pre>

<p>In this case, <code>bson</code> would be a document with 4 elements (an Integer, a String, an Array and an embeded document). This document would correspond in Javascript to:
<code>javascript
{a: 1, b: &quot;2&quot;, c: [1,2,3], d: {d1: 10, d2: 11} }
</code></p>

<p>Conversly, to decode a bson document:
<code>elixir
%{a: 1} == Bson.decode &lt;&lt;12, 0, 0, 0, 16, 97, 0, 1, 0, 0, 0, 0&gt;&gt;
</code></p>

<p>Special Bson element that do not have obvious corresponding type in Elixir are represented with Record, for example:</p>

<pre><code class="elixir">jsbson = Bson.encode js: Bson.JS.new code:&quot;function(a) return a+b;&quot;, scope: [b: 2]
rebson = Bson.encode re: Bson.Regex.new pattern: &quot;\d*&quot;, opts: &quot;g&quot;
</code></pre>

<p>Implementation of encoders and decoders is done using <code>Protocol</code>, so, it is possible to redefine them (for instance, encoding end decoding of Bson.Bin could be redefined for the user defined subtype)</p>

    </div>
  </body>
</html>

